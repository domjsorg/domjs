/******************************************
*  Copyright 2022 Alejandro Sebastian Scotti, Scotti Corp.
*
*  Licensed under the Apache License, Version 2.0 (the "License");
*  you may not use this file except in compliance with the License.
*  You may obtain a copy of the License at
*
*      http://www.apache.org/licenses/LICENSE-2.0
*
*  Unless required by applicable law or agreed to in writing, software
*  distributed under the License is distributed on an "AS IS" BASIS,
*  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
*  See the License for the specific language governing permissions and
*  limitations under the License.

*  @author Alejandro Sebastian Scotti
*  @version v07-25-22-16-54
*******************************************/

(()=>{window.dom={};dom.addClass=(t,e)=>{let i=dom.getTag(t);return dom.hasClass(i,e)||i.classList.add(e),dom};dom.append=(t,e,i)=>{let n=dom,s=n.utils;if(!e||!t){console.error("DOM.addChild(): missing parameter 'selector', 'content' or both.");return}if(typeof e=="string"&&(e=n.parse(e)),s.hasSingleID(t))return t=t.replace("#",""),s.append(document.getElementById(t),e,i),n;if(s.hasSingleClass(t)){let l=document.getElementsByClassName(t);return l&&l.length>0&&s.appendChildAll(l,e,i),n}if(s.isString(t)){let l=document.querySelectorAll(t);return l&&l.length>0&&s.appendChildAll(l,e,i),n}if(s.isElement(t)||s.isNode(t))return s.append(t,e,i),n;if(s.isNodeList(t)||s.isHTMLCollection(t)||s.isArray(t))return s.appendChildAll(t,e,i),n};dom.appendSVG=(t,e,i)=>{if(!e||!t){console.error("DOM.addSVGChild(): missing parameter 'selector', 'content' or both.");return}if(typeof e=="string"){let n=document.createElement("div"),s="<svg>"+e+"</svg>";n.innerHTML=""+s,Array.prototype.slice.call(n.childNodes[0].childNodes).forEach(function(l){dom.append(t,l,i)})}else dom.append(t,el,i)};dom.appendSelfToParentTag=(t,e,i)=>{let n=dom.getTag(t);return n?(dom.append(n,e,i),n):`${e.localName}: parentTag element not found. DOM install failed.`};dom.computeTagHeight=t=>{let e=dom.utils,i=window.getComputedStyle(t,null);if(!i)return;let n=i.getPropertyValue("padding-top"),s=i.getPropertyValue("padding-bottom"),l=i.getPropertyValue("margin-top"),d=i.getPropertyValue("margin-bottom"),g=e.getStyleNumValue(n)+e.getStyleNumValue(s),c=e.getStyleNumValue(l)+e.getStyleNumValue(d);return g+c+t.clientHeight};dom.computeTagWidth=(t,e)=>{let i=dom.utils,n=window.getComputedStyle(t,null);if(!n)return;let s=n.getPropertyValue("padding-left"),l=n.getPropertyValue("padding-right"),d=n.getPropertyValue("margin-left"),g=n.getPropertyValue("margin-right"),c=i.getStyleNumValue(s)+i.getStyleNumValue(l),f=i.getStyleNumValue(d)+i.getStyleNumValue(g),h=0;if(e){let p=window.getComputedStyle(e,null);if(p){let S=p.getPropertyValue("padding-left"),N=p.getPropertyValue("padding-right");h+=i.getStyleNumValue(S)+i.getStyleNumValue(N)+f}}return h+=c+f+t.clientWidth,h};dom.createSVGTag=(t,e)=>{let i=dom.utils,n=i.createTagNS(t,"SVG");if(!(!e||!i.isObject(e)))return dom.setProps(n,e.prop),dom.setAttr(n,e.attr),i.setEvent(n,e.event),e.children&&Array.isArray(e.children)&&e.children.forEach(s=>{let l=dom.createSVGTag(s.name,s.props,s.attrs,s.children);i.append(n,l)}),n};dom.createTag=(t,e)=>{let i=dom.utils,n=i.createTagNS(t);if(!e||!i.isObject(e))return n;switch(t){case"input":case"textarea":case"select":case"option":case"output":n.value=e.text?e.text:"";break;default:n.innerText=e.text?e.text:"";break}return dom.setProps(n,e.prop),dom.setAttr(n,e.attr),i.setEvent(n,e.event),e.class&&e.class!==""&&(n.className=e.class),n};dom.empty=t=>{let e=dom.getTag(t);return e.innerHTML="",self};dom.getTag=(t,e)=>{let i=dom.utils;if(typeof t!="string")return t;let n=e||document;return typeof n=="string"&&(n=i.getElement(n)),i.hasSingleID(t)?n.getElementById(t.replace("#","")):i.hasSingleClass(t)?n.getElementsByClassName(t.replace(".",""))[0]:i.hasSingleTagName(t)?n.getElementsByTagName(t)[0]:n.querySelector(t)};dom.getTags=(t,e)=>{let i=dom.utils;if(typeof t!="string")return t;if(i.hasSingleID(t))return"For a single #id selector use getTag() method instead (expects a single tag return, not a list).";let n=e||document;return i.hasSingleClass(t)?n.getElementsByClassName(t.replace(".","")):i.hasSingleTagName(t)?n.getElementsByTagName(t):(console.log("DOM.getTags(): you have used document.querySelectorAll('') that returns DOM tags that are not 'LIVE' therefore won't automatically stay in sync with the browser therefore, it's not recommended. Try a direct String selector."),n.querySelectorAll(t))};dom.hasClass=(t,e)=>t.className.indexOf(e)!==-1;dom.parse=t=>{var e=document.createElement("template");return t=t.trim(),e.innerHTML=t,e.content};dom.prepend=(t,e)=>{dom.append(t,e,!0)};dom.remove=t=>{let e=dom.utils;return typeof t=="string"?e.hasSingleID(t)?i(getTag(t)):dom.removeAll(getTags(t)):i(t),self;function i(n){n.parentNode.removeChild&&n.parentNode.removeChild(n)}};dom.removeAll=t=>{for(let e=0;e<t.length;e++)dom.remove(t[e])};dom.removeAttrs=(t,e)=>{let i=dom.utils,n=dom.getTag(t);return n&&!i.isString(n)&&e&&Array.isArray(e)&&e.forEach(s=>{n.removeAttribute(s)}),dom};dom.removeAttrsAll=(t,e)=>{let i=dom.utils,n=dom.getTags(t);if(n&&!i.isString(n)&&e&&Array.isArray(e))for(let s=0;s<n.length;s++)e.forEach(l=>{n[s].removeAttribute(l)});return dom};dom.removeClass=(t,e)=>(dom.getTag(t).classList.remove(e),dom);dom.removeClassAll=(t,e)=>{let i=dom.utils;if(i.isArray(t))for(let n=0;n<t.length;n++)dom.removeClass(t[n],e);else if(i.isObject(t))for(let n in t)dom.removeClass(t[n],e)};dom.setAttr=(t,e)=>{let i=dom.utils,n=dom.getTag(t);if(n&&!i.isString(n)&&e&&i.isObject(e))for(let s in e)n.setAttribute(s,e[s]);return dom};dom.setAttrAll=(t,e)=>{let i=dom.utils,n=dom.getTags(t);if(n&&!i.isString(n)&&e&&i.isObject(e))for(let s=0;s<n.length;s++)for(let l in e)n[s].setAttribute(l,e[l]);return dom};dom.setProps=(t,e)=>{let i=dom.utils,n=dom.getTag(t);if(n&&!i.isString(n)&&e&&i.isObject(e))for(let s in e)n[s]=e[s];return dom};dom.setPropsAll=(t,e)=>{let i=dom.utils,n=dom.getTags(t);if(n&&!i.isString(n)&&e&&i.isObject(e))for(let s=0;s<n.length;s++)for(let l in e)n[s][l]=e[l];return dom};dom.supplantHTML=(t,e)=>t.replace(/{([^{}]*)}/g,function(i,n){let s=dom.utils.getProperty(n,e);return typeof s=="string"||typeof s=="number"?s:i});dom.toggleClass=(t,e)=>(dom.getTag(t).classList.toggle(e),dom);dom.utils=new function(){"use strict";this.append=t,this.appendChildAll=e,this.createTagNS=i,this.getElement=n,this.getProperty=s,this.getStyleNumValue=l,this.hasColon=d,this.hasSingleClass=g,this.hasSingleID=c,this.hasSingleTagName=f,this.isArray=h,this.isElement=p,this.isHTMLCollection=S,this.isNode=N,this.isNodeList=T,this.isObject=C,this.isString=m,this.setEvent=P,this.singleHashChar=A,this.singlePeriodChar=E;function t(r,o,a){o&&r&&(a&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o))}function e(r,o,a){for(let u=0;u<r.length;u++)t(r[u],o,a)}function i(r,o){switch(o){case"SVG":return document.createElementNS("http://www.w3.org/2000/svg",r);case"MathML":return document.createElementNS("http://www.w3.org/1998/Math/MathML",r);default:return document.createElementNS("http://www.w3.org/1999/xhtml",r)}}function n(r){return typeof r!="string"?r:c(r)?document.getElementById(r.replace("#","")):g(r)?document.getElementsByClassName(r.replace(".",""))[0]:f(r)?document.getElementsByTagName(r)[0]:document.querySelector(r)}function s(r,o){let a=r.split("."),u=o;for(let y=0,w=a.length;y<w;y++){if(!(a[y]in u))return"";u=u[a[y]]}return u}function l(r){return parseInt(r.replace("px",""))}function d(r){if(m(r))return r.includes(":")}function g(r){if(m(r))return r.startsWith(".")&&E(r)&&!d(r)&&!r.includes("#")&&!r.includes(" ")}function c(r){if(m(r))return r.startsWith("#")&&A(r)&&!d(r)&&!r.includes(".")&&!r.includes(" ")}function f(r){if(m(r))return!r.includes("#")&&!r.includes(".")&&!r.includes(" ")&&!d(r)}function h(r){return Array.isArray(r)}function p(r){return r instanceof Element}function S(r){return HTMLCollection.prototype.isPrototypeOf(r)}function N(r){return r instanceof Node}function T(r){return NodeList.prototype.isPrototypeOf(r)}function C(r){return typeof r=="object"}function m(r){return typeof r=="string"}function P(r,o){let a=dom.getTag(r);if(a&&!m(a)&&o&&C(o))for(let u in o)a.addEventListener(u,o[u]);return self}function A(r){if(m(r))return(r.match(RegExp("#","g"))||[]).length===1}function E(r){if(m(r))return(r.match(RegExp("\\.","g"))||[]).length===1}};})();
